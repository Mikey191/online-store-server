## Что такое REST API?
**REST API** (Representational State Transfet Application Programming Interface) - это стандарт архитектуры программного обеспечения, который определяет **правила** и **ограничения** для создания веб-сервисов. **REST API** использует **HTTP** для **обмена данными** между клиентом и сервером. Он основан на принципах **REST**, котороые описывают, как взаимодействовать с ресурсами через стандартные **операции HTTP,** такие как **GET**, **POST**, **PUT**, **DELETE**.  
**REST API** позволяет клиентам **получать**, **создавать**, **обновлять** и **удалять** данные на сервере. Он использует уникальные **URL-адреса** для идентификации ресурсов и возвращает данные в формате **JSON** или **XML**.

### Использование REST API для интернет-магазина.
1. **Получение информации о продуктах**. Вы можете использовать REST API для получения информации о продуктах, таких как название, описание, цена и наличие. Это позволяет отображать актуальную информацию о продуктах на вашем веб-сайте или в мобильном приложении.

2. **Добавление продуктов в корзину**. REST API может быть использован для добавления выбраных продуктов в корзину покупателя. После добавления продуктов в корзину, вы можете сохранить информацию о корзине на сервере и обновлять ее при необходимости.

3. **Оформление заказа**. REST API позволяет оформить заказ, передавая необходимую информацию, такую как адрес доставки, способ оплаты и выбранные продукты. Сервер может обработать эту информацию и создать заказ в системе интернет-магазина.

4. **Получение информации о заказах**. REST API может быть использован для получения информации о заказах, таких как статус, дата и время доставки, и детали покупателя. Это позволит вам отслеживать и управлять заказами в вашем интернет-магазине.

5. **Аутентификация и авторизация**. REST API может быть использован для аутентификации пользователей и предоставления доступа к определенным функциям или ресурсам. Вы можете использовать токены аутентификации, такие как JWT, для обеспеччения безопасности и контроля доступа к данным.

## Что такое ORM для реляционных баз данных?
**ORM (Object-Relational Mapping)** - это технология, которая позволяет **работать с реляционными базами данных**, используя объектно-ориентированный подход. Она представляет средства для **отображения данных** из таблиц базы данных на объекты в программном коде и обратно.  
**ORM упрощает взаимодействие с базой данных**, позволяя разработчикам использовать объекты и методы для выполнения операций **CRUD (создание, чтение, обновление, удаление)** **вместо написания прямых SQL-запросов**. Он так же обеспечивает **автоматическую генерация SQL-запросов на основе объектов и их отношений**.

ORM может быть полезным инструментом при разработке приложений, особенно в случае сложных структур баз данных или при работе с большим объемом данных.

Примеры ORM:
- Hibernate (для Java)
- SQLAlchemy (для Python)
- Entity Framework (для .NET)
- Django ORM (для Python и Django фреймворка)
- ActiveRecord (для Ruby on Rails)
- Sequelize (для Node.js)

## Что такое JWT авторизация и JWT токен?
**JWT (JSON Web Token)** - это **стандарт** для создания **токенов**, которые пользуются для **аутентификации** и **авторизации** в веб-приложениях.

Токены JWT состоят из трех частей:
- **заголовка** (header)
- **полезной нагрузки** (payload)
- **подписи** (signature)

`header` содержит информацию о типе токена и используемом алгоритме шифрования или подписи.

`payload` содержит данные, которые могут быть использованы для идентификации пользователя или передачи другой информации. В полезной нагрузке могут быть указаны такие данные, как идентификатор пользователя, срок действия токена и другие пользовательские данные.

`signature` используется для проверки целостности токена и подтвержения его подлинности. Подпись создается с использованием секретного ключа, который известен только серверу, генерирующему токен.

**JWT токены широко используются для аутентификации и авторизации в веб-приложениях.** Они компактны, безопасны для передачи через сеть и могут быть использованы для передачи информации между клиентом и сервером.

### Применение JWT токенов
JWT токены могут быть использованы для различных целей:
- **Аутентификация**. После успешной аутотентификации пользователя, сервер может выдать JWT токен, который будет содержать информацию об аутентифицированном пользователе. Этот токен может быть передан клиенту и использован для последующей авторизации запросов к защищенным ресурсам.

- **Авторизация**. JWT токены могут содержать информацию о разрешениях пользователя, которая может быть использована для определения доступа к определенным ресурсам или функциональности.

- **Одноэтаптаня аутентификация**. JWT токены могут быть использованы для реализации одноэтапной аутентификации (Single Sing-On, SSO), позволяющей пользователям получить доступ к нескольким приложениям или сервисам без необходимости повторной аутентификации.

### Преимущества JWT токенов.
- **Без состояния**. JWT токены не требуют хранения состояния на сервере, что делает их масштабируемыми и удобными для использования в распределенных системах.

- **Компактность**. JWT токены имеют компактный формат, что делает их удобными для передачи через сеть.

- **Расширяемость**. JWT токены могут содержать пользовательские данные в полезной нагрузке, что позволяет передать дополнительную информацию, необходимую для приложений.

### Пример JWT токена который состоит из трех частей, разделенных точками: заголовка, полезной нагрузки и подписи. Каждая часть закодирована в формате Base64.
**JWT-токен**:
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJleHAiOjE1ODEzNTcwMzl9.E4FNMef6tkjIsf7paNrWZnB88c3WyIfjONzAeEd4wF0
```
**header**:
```javascript
{
  "alg": "HS256",
  "typ": "JWT"
}
```
**payload**:
```javascript
{
  "user_id": 1,
  "exp": 1581357039
}
```
**signature**:
```javascript
E4FNMef6tkjIsf7paNrWZnB88c3WyIfjONzAeEd4wF0
```

## CORS
### Проверка обработки запросов
**CORS (Cross-Origin Resourse Sharing)** обеспечивает **проверку обработки запросов от других доменов** с помощью механизма, который включает в себя **заголовки HTTP** и **предварительные запросы** (preflight requets)

1. `Заголовок Origin`:
Когда браузер отправляет запрос к ресурсу на другом домене, он добавляет заголовок Origin, который указывает источник (домен) запроса. Сервер, получив этот запрос, может проверить, разрешен ли доступ с этого источника.

2. `Ответ сервера`:
Если сервер поддерживает CORS, он должен вернуть соответствующие заголовки в ответе. Например, заголовок Access-Control-Alow-Origin указывает, какие домены могут получить доступ к ресурсу. Если домен, указанный в Origin, совпадает с разрешенными, браузер разрешает выполнение запроса.

3. `Предварительные запросы` (Preflight requets):
Для некоторых типов запросов (например, с методами PUT, DELETE или с нестандартными заголовками) браузер сначала отправит предварительный запростипа OPTIONS. Этот запрос проверяет, поддерживает ли сервер CORS и какие методы в заголовке разрешены. Сервер должен ответить с заголовками, которые указывают, что запрос должен быть выполнен.

### Как ограничить пул разрешенных доменов?
```javascript
const express = require("express");
const cors = require("cors");

const app = express();

// Настройка CORS с ограничением по доменам
const allowedDomains = ['http://example.com', 'http://anotherdomain.com'];

const corsOptions = {
    origin: function (origin, callback) {
        // Разрешаем запросы без указания источника (например, для локального тестирования)
        if (!origin || allowedDomains.indexOf(origin) !== -1) {
            callback(null, true);
        } else {
            callback(new Error('Not allowed by CORS'));
        }
    }
};

// Подключение CORS с настройками
app.use(cors(corsOptions));

// Пример маршрута
app.get("/api/data", (req, res) => {
    res.json({ message: "Hello from the server!" });
});

// Запуск сервера
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
    console.log(`Server is running on port ${PORT}`);
});
```
### Объяснение кода:
1. `allowedDomains` - Массив, содержащий домены, которым разрешен доступ к вашему API
2. `corsOptions` - Объект с настройками CORS, в котором функция origin проверяет, находится ли запрашиваемый домен в списке разрешенных. Если домен разрешен, запрос проходит, иначе возвращается ошибка.
3. `app.use(cors(corsOptions))` - Подключает CORS с указаными настройками.

### Дефолтные настройки CORS для интернет-магазина.
1. **Разрешенные источники**:
Обычно стоит разрешить доступ только с вашего основного домена (например, `https://www.yourstore.com`). Это предотвратит доступ к вашему API с других, потенциально небезопасных доменов.

2. **Методы**:
Разрешите только необходимые методы HTTP. Для интернет-магазина это могут быть GET, POST, PUT, и DELETE. Например:
```javascript
const corsOptions = {
    origin: 'https://www.yourstore.com',
    methods: ['GET', 'POST', 'PUT', 'DELETE'],
};
```

3. **Заголовки**:
Убедитесь, что вы разрешаете только те заголовки, которые необходимы для вашего приложения. Например, если вы используете авторизацию, вам может понадобиться разрешить заголовок Authorization:
```javascript
const corsOptions = {
    allowedHeaders: ['Content-Type', 'Authorization'],
};
```

4. **Предварительные запросы**:
Если ваше приложение использует сложные запросы (например, с нестандартными заголовками), убедитесь, что сервер правильно обрабатывает предварительные запросы (preflight requests) с методом OPTIONS.

5. **Безопасность**:
Рассмотрите возможность использования HTTPS для вашего интернет-магазина, чтобы защитить данные пользователей и транзакции.

### Пример настройки CORS в Express может выглядеть так:
```javascript
const express = require("express");
const cors = require("cors");

const app = express();

const corsOptions = {
    origin: 'https://www.yourstore.com',
    methods: ['GET', 'POST', 'PUT', 'DELETE'],
    allowedHeaders: ['Content-Type', 'Authorization'],
};

app.use(cors(corsOptions));

// Пример маршрута
app.get("/api/products", (req, res) => {
    res.json({ message: "Список продуктов" });
});

// Запуск сервера
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
    console.log(`Сервер запущен на порту ${PORT}`);
});
```